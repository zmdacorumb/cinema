<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, 
  shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/myboots.css">
  <link rel="stylesheet" href="css/css.css">
  <!-- slick slider 小slider電影欄位 -->
  <link rel="stylesheet" href="slick/slick.css">
  <link rel="stylesheet" href="slick/slick-theme.css">
  <!-- animate效果 -->
  <link rel="stylesheet" href="css/animate.css">
  <script src="js/jquery-3.4.1.min.js"></script>
  <script src="slick/slick.js" type="text/javascript"></script>
  <title>驚奇電影院</title>
</head>

<body  >
  <!-- navbar -->


  <header class="navbar navbar-expand-lg py-3 bg-navnav  " >
    <a class="navbar-brand  " href="#">驚奇電影院</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse flex-row-reverse px-5" id="navbarNavAltMarkup">
      <div class="navbar-nav d-flex menu-left text-white">
        <a class="nav-item nav-link animated bounceInDown text-white " href="#">回首頁</a>
        <a class="nav-item nav-link animated bounceInDown text-white" href="#">電影票價</a>
        <a class="nav-item nav-link animated bounceInDown text-white" href="#">加入會員</a>
        <a class="nav-item nav-link animated bounceInDown text-white" href="#"
          tabindex="-1">登入</a>
      </div>
    </div>
  </header>

  <!-- 訂票系統 -->
  <section  class="vh-100 vw-100 row justify-content-center  bg-light  ">
    <div >
      <img class="p-0" src="img/lion-king-singl.jpeg" width="1920" height="700px" alt="" style="opacity: 0.5">
    </div>
    <div class="container " style=" position: absolute; top:77%; ">
      <form action="api.php?do=test" method="POST">
        <div class="form-row align-items-center justify-content-center ">
          <div class="col-md-3">
            <select name="chmovie" id="chmovie" class="form-control text-secondary" onchange="getval()">          
            </select>
          </div>
          <div class=" col-md-2 my-3 ">
            <select name="chdate" id="chdate" class="form-control text-secondary" onchange="getval()">
            </select>
          </div>
          <div class=" col-md-3 my-3">
              <select name="chtime" id="chtime" class="form-control text-secondary">
              </select>
            </div>

          <div class="col-auto ">
            <button type="submit" class="btn btn-light text-secondary">確定場次</button>
          </div>
        </div>
      </form>
    </div>
  </section>
  
  <!-- 輪播big-slider ------------------------------------------------------ -->
  <section class="my-5">
    <div id="slider_small" class="carousel slide" data-ride="carousel" data-interval="2000" >
      <ol class="carousel-indicators">
        <li data-target="#slider_small" data-slide-to="0" class="active"></li>
        <li data-target="#slider_small" data-slide-to="1"></li>
        <li data-target="#slider_small" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="img/捍衛任務3.jpg" class="d-block w-100" alt="...">

        </div>
        <div class="carousel-item">
          <img src="img/捍衛任務3.jpg" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
          <img src="img/在黑暗中說的鬼故事.jpg" class="d-block w-100" alt="...">
        </div>
      </div>
      <a class="carousel-control-prev" href="#slider_small" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#slider_small" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  </section>

  <!-- card 上映電影區 -->
  <section class=" ">
    <div class="container ">
      <div id="b_small_movie" class="row">
        
      </div>
    </div>
  </section>



  <!--輪播 預告片 small-slider -----------------------------------------------------------  -->
  <section class="container   ">

    <div class="bg-dark text-white font-weight-bold h3 text-center py-2">即將上映</div>
    <div class="control mt-5 ">
      <div><a href=""><img src="img/small_movie/a2.jpg" alt="下半場"></a></div>
      <div><a href=""><img src="img/small_movie/a3.jpg" alt="朵拉與失落的黃金城"></a></div>
      <div><a href=""><img src="img/small_movie/a4.jpg" alt="絕世名伶"></a></div>
      <div><a href=""><img src="img/small_movie/a5.jpg" alt="在黑暗中說的鬼故事"></a></div>
      <div><a href=""><img src="img/small_movie/a6.jpg" alt="痛苦與榮耀"></a></div>
      <div><a href=""><img src="img/small_movie/a7.jpg" alt="玩命關頭: 特別行動"></a></div>
      <div><a href=""><img src="img/small_movie/a8.jpg" alt="出走巴黎"></a></div>
      <div><a href=""><img src="img/small_movie/a9.jpg" alt="從前,有個好萊塢"></a></div>
      <div><a href=""><img src="img/small_movie/a10.jpg" alt="電流大戰"></a></div>
      <div><a href=""><img src="img/small_movie/a11.jpg" alt="全面攻佔3"></a></div>
    </div>
  </section>
  <!-- footer區 -->
  <div class="container-fluid p-0 fixed-bottom ">
    <div>
      <ul class="nav bg-dark justify-content-center">
        <li class="nav-item ">
          <a class="nav-link text-light active" href="#">Copyright &copy; JO</a>
        </li>
      </ul>
    </div>
  </div>










 








  <script>
    // small slider
    $('.control').slick({
      infinite: true,
      slidesToShow: 4,
      slidesToScroll: 1,
      autoplay: true,
      autoplaySpeed: 5000,
      responsive: [{
          breakpoint: 1024,
          settings: {
            slidesToShow: 3,
            slidesToScroll: 3,
            infinite: true,
            dots: true
          }
        },
        {
          breakpoint: 600,
          settings: {
            slidesToShow: 1,
            centerMode: true,
            centerPadding: '90px',
            autoplay: true
          }
        },
        {
          breakpoint: 480,
          settings: {
            arrows: false,
            centerMode: true,
            centerPadding: '50px',
            slidesToShow: 1,
            autoplay: true
          }
        },
        {
          breakpoint: 376,
          settings: {
            centerMode: true,
            centerPadding: '30px',
            respondTo: 'min',
            slidesToShow: 1,
            autoplay: true
          }
        }
        // You can unslick at a given breakpoint now by adding:
        // settings: "unslick"
        // instead of a settings object 
      ]
    });
    // 小尺寸movie ajax 取得資料
    $.post("api.php?do=movie", function (re) {
      $('#b_small_movie').html(re);
    })
    // 選擇電影 下拉式選單 ajax取得資料
    $.post("api.php?do=chmovie", function (re){
      $('#chmovie').html(re);
    })
    //  日期計算函式
    function getday(add){
      let today = new Date;
      let gg = today.getDate();//算今天幾號
      today.setDate(gg + add);//設定今天日期為 今日號+add
      let yy = today.getFullYear();
      let mm = today.getMonth() + 1;
      let dd = today.getDate();
      if(mm<10) mm=`0${mm}`;
      if(dd<10) dd=`0${dd}`;
      return `${yy}-${mm}-${dd}`;
    }
    //選擇日期 下拉式選單
    $('#chdate').html(`
      <option value="">請選擇場次</option>
      <option value=${getday(0)}>${getday(0)}</option>
      <option value=${getday(1)}>${getday(1)}</option>
      <option value=${getday(2)}>${getday(2)}</option>
      <option value=${getday(3)}>${getday(3)}</option>
      <option value=${getday(4)}>${getday(4)}</option>
      <option value=${getday(5)}>${getday(5)}</option>
      <option value=${getday(6)}>${getday(6)}</option>
      <option value=${getday(7)}>${getday(7)}</option>
    `);
     // 選擇場次 下拉式選單
     function getval(){
        let movie = $('#chmovie').val();
        let date = $('#chdate').val();
        // console.log(movie,date);
        $.post("api.php?do=booking",{movie,date},function (re){
          $('#chtime').html(re);
        });

      }
      getval();
  </script>










  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->

  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <!-- 其它套件 or js 要放下面 -->
  <script src="js/jquery.easing.min.js"></script>
  <script src="js/scrollpage.js"></script>

</body>

</html>